
<!doctype html>
<html lang="ms">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>PENTADBIR CHAMPION PBS PAHANG</title>
<style>
body{font-family:Arial;margin:20px}
input,select,button{width:100%;padding:10px;margin:6px 0}
.card{border:1px solid #ddd;padding:15px;margin-bottom:15px}
h3{margin-top:0}
</style>
</head>
<body>

<div class="card">
<h3>ISI DATA</h3>
<select id="ppd">
<option value="">-- PPD --</option>
<option>PPD Kuantan</option>
<option>PPD Pekan</option>
<option>PPD Temerloh</option>
</select>

<input id="sr" placeholder="Sekolah Rendah">
<input id="gb" placeholder="Guru Besar">
<input id="sm" placeholder="Sekolah Menengah">
<input id="pg" placeholder="Pengetua">

<button onclick="simpan()">SIMPAN</button>
<div id="msg"></div>
</div>

<div class="card">
<h3>DASHBOARD</h3>
<div id="list">Loading…</div>
</div>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzt5cE4h8orcUxy5B9R_vN4L6-3jfnSQXLQooQLCfs7Uvz277HvgByEElskezWgxKkEww/exec";

// ===== POST (FORM – NO CORS) =====
function simpan(){
  const data = {
    ppd:ppd.value,
    sekolahSR:sr.value,
    gb:gb.value,
    sekolahSM:sm.value,
    pg:pg.value
  };

  const f = document.createElement("form");
  f.method="POST";
  f.action=WEB_APP_URL;
  f.enctype="text/plain";

  const t=document.createElement("textarea");
  t.name="data";
  t.value=JSON.stringify(data);
  f.appendChild(t);

  document.body.appendChild(f);
  f.submit();
  document.body.removeChild(f);

  msg.innerHTML="✔ Data dihantar";
  setTimeout(load,1000);
}

// ===== GET (JSONP – NO CORS) =====
function load(){
  const cb="cb"+Date.now();
  window[cb]=res=>{
    list.innerHTML=res.data.map(r=>
      `<p><b>${r.ppd}</b><br>
      ${r.sekolahSR} – ${r.gb}<br>
      ${r.sekolahSM} – ${r.pg}</p>`
    ).join("");
  };
  const s=document.createElement("script");
  s.src=WEB_APP_URL+"?callback="+cb;
  document.body.appendChild(s);
}

load();
</script>

</body>
</html>


